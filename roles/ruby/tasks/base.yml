---

- name: git clone rbenv repo
  git:
    repo: https://github.com/sstephenson/rbenv
    dest: "{{user_home}}/.rbenv"
    update: yes

- name: install ruby-build plugin for rbenv
  git:
    repo: https://github.com/sstephenson/ruby-build.git
    dest: "{{user_home}}/.rbenv/plugins/ruby-build"
    depth: 1

- name: install ruby-gem-rehash plugin for rbenv
  git:
    repo: https://github.com/sstephenson/rbenv-gem-rehash.git
    dest: "{{user_home}}/.rbenv/plugins/rbenv-gem-rehash"
    update: yes

- name: install rbenv-default-gems plugin for rbenv
  git:
    repo: https://github.com/sstephenson/rbenv-default-gems.git
    dest: "{{user_home}}/.rbenv/plugins/rbenv-default-gems"
    update: yes

- name: install rbenv-each plugin for rbenv
  git:
    repo: https://github.com/chriseppstein/rbenv-each.git
    dest: "{{user_home}}/.rbenv/plugins/rbenv-each"
    update: yes

- name: install rbenv-update plugin for rbenv
  git:
    repo: https://github.com/rkh/rbenv-update.git
    dest: "{{user_home}}/.rbenv/plugins/rbenv-update"
    update: yes

- name: set-up rbenv init file
  copy: src=rbenv-init.sh dest={{user_home}}/.rbenv-init.sh

- name: copy gemrc
  copy: src=gemrc dest={{user_home}}/.gemrc

- name: copy irbrc
  copy: src=irbrc dest={{user_home}}/.irbrc

- name: copy default-gems for rbenv-default-gems plugin
  copy: src=default-gems dest={{user_home}}/.rbenv/default-gems
